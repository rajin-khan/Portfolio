import"./hoisted.DsxPFER4.js";(function(){function i(){const s=document.getElementById("newsletter-email"),e=document.getElementById("subscribe-button"),n=document.getElementById("checkmark");if(!s||!e||!n){console.error("Newsletter form elements not found");return}e.addEventListener("click",async r=>{r.preventDefault();const o=s.value.trim();if(!o)return;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){alert("Please enter a valid email address");return}try{e.style.opacity="0.5",e.style.pointerEvents="none";const t=await fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})}),a=t.headers.get("content-type");let l;if(a&&a.includes("application/json"))l=await t.json();else{const c=await t.text();throw new Error(`Server error: ${c.substring(0,100)}`)}t.ok?(e.style.display="none",n.style.display="block",n.classList.add("checkmark-visible"),s.value="",setTimeout(()=>{n.style.display="none",n.classList.remove("checkmark-visible"),e.style.display="block",e.style.opacity="1",e.style.pointerEvents="auto"},2500)):(alert(l.error||"Something went wrong. Please try again."),e.style.opacity="1",e.style.pointerEvents="auto")}catch(t){console.error("Error subscribing:",t),alert("Failed to subscribe. Please try again."),e.style.opacity="1",e.style.pointerEvents="auto"}}),s.addEventListener("keypress",r=>{r.key==="Enter"&&(r.preventDefault(),e.click())})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i()})();
